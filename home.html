<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Mate</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="icon" href="https://favicon-generator.org/favicon-generator/htdocs/favicons/2015-02-03/4586e9b6c2e1fcd8fde47994b71a12bc.ico" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: lightgrey;
        }

        #message {
            padding: 5px;
            background-color: lightgrey;
        }

        nav {
            justify-content: space-between;
            align-items: center;
        }

        nav p {
            font-weight: bold;
            font-size: 1rem;
        }
    </style>
    </style>
</head>

<body>
    <header>
        <nav class="container-fluid bg-primary d-flex text-white p-3 mb-4 d-flex">
            <h1>Task Mate</h1>
            <p id="email"></p>
            <button id="signoutBtn" class="btn btn-danger btn-sm">Sign Out</button>
        </nav>
    </header>
    <main class="container">
        <div class="container text-center">
            <p class="fs-4">
                Welcome to TaskMaster — Your Smart Task Manager!
                Organize your work, track progress, and stay focused effortlessly.
                Our tool helps you manage daily tasks, team projects, and personal goals in one place.
                Say goodbye to missed deadlines and cluttered notes!
                With real-time updates and smart reminders, productivity is just a click away.
                Collaborate with your team, assign tasks, and monitor progress seamlessly.
                Customize your workflow the way you like — flexible, simple, and intuitive.
                Your tasks, your priorities, perfectly aligned with your goals.
                Stay motivated and achieve more every single day.
                Let’s make productivity your new habit — start managing smarter today!
            </p>
            <div class="container-fluid d-flex gap-3">
                <input type="text" id="text" class="form-control mb-3" placeholder="Add Task....">
                <button class="btn btn-primary mb-3" id="add_task">Add Task</button>
                <button class="btn btn-primary mb-3" id="view_task">View Task</button>
            </div>
            <div class="container-fluid f-flex flex-column text-center">
                <h3 id="Output"></h3>
                <p id="message"></p>
            </div>
        </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-auth-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCwJ4EoYuJN201Ydib5Ic4fCGewzxoKCMc",
            authDomain: "taskmate-f0632.firebaseapp.com",
            projectId: "taskmate-f0632",
            storageBucket: "taskmate-f0632.appspot.com",
            messagingSenderId: "261833497693",
            appId: "1:261833497693:web:a54190958bfc72c1dd01b4"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Sign out functionality
        const signoutBtn = document.getElementById("signoutBtn");

        signoutBtn.onclick = () => {
            auth.signOut()
                .then(() => {
                    window.location.href = "index.html";
                })
                .catch((error) => {
                    console.error(error.code, error.message);
                    alert("Error signing out: " + error.message);
                });
        };

        // Display user email in navbar
        auth.onAuthStateChanged((user) => {
            const emailP = document.getElementById("email");
            if (user) {
                emailP.innerText = user.email; 
            } else {
                emailP.innerText = "Not Logged In";
            }
        });
    </script>
    <script>
        // Task Management Functionality
        let text = document.getElementById("text")
        text.addEventListener('focus', () => {
            document.getElementById("Output").innerHTML = ""
            document.getElementById("message").innerText = ""
            document.getElementById("message").style.backgroundColor = "lightgrey"
        })
        // Add Task Functionality
        const add_task_button = document.getElementById('add_task');
        add_task_button.onclick = () => {
            const task_input = document.getElementById("text")
            const task = task_input.value
            document.getElementById("Output").innerHTML = ""
            if (task) {
                let storage_value = JSON.parse(localStorage.getItem("tasks") || "[]")
                storage_value.push(task)
                localStorage.setItem("tasks", JSON.stringify(storage_value))
                document.getElementById("message").style.backgroundColor = "lightgreen"
                document.getElementById("message").innerText = "Task Added Successfully"
                task_input.value = ""
                setTimeout(() => {
                    document.getElementById("message").innerText = ""
                    document.getElementById("message").style.backgroundColor = "lightgrey"
                }, 2000)
            }
            else {
                document.getElementById("message").style.backgroundColor = "lightcoral"
                document.getElementById("message").innerText = "Please Enter a Task"
                task_input.value = ""
                setTimeout(() => {
                    document.getElementById("message").innerText = ""
                    document.getElementById("message").style.backgroundColor = "lightgrey"
                }, 2000)
            }
        }
        // View Task Functionality
        const view_task_button = document.getElementById('view_task');

        view_task_button.onclick = () => {
            const task_input = document.getElementById("text")
            const task = task_input.value
            const Output = document.getElementById("Output")
            Output.innerHTML = ""
            document.getElementById("message").innerText = ""
            document.getElementById("message").style.backgroundColor = "lightgrey"
            let storage_value = JSON.parse(localStorage.getItem("tasks") || "[]");

            if (storage_value.length > 0) {
                for (let i = 0; i < storage_value.length; i++) {
                    const taskDiv = document.createElement("div")
                    taskDiv.innerText = `${i + 1}. ${storage_value[i]} `
                    const button = document.createElement("button")
                    button.innerText = "Task Done"
                    button.id = "btn_del";
                    button.className = "btn btn-danger btn-sm ms-2"
                    button.onclick = () => {
                        storage_value.splice(i, 1)
                        localStorage.setItem("tasks", JSON.stringify(storage_value))
                        view_task_button.click()
                        document.getElementById("message").style.backgroundColor = "lightcoral"
                        document.getElementById("message").innerText = "Task Deleted Successfully"
                        setTimeout(() => {
                            document.getElementById("message").innerText = ""
                            document.getElementById("message").style.backgroundColor = "lightgrey"
                        }, 2000)
                    }

                    taskDiv.appendChild(button)
                    Output.appendChild(taskDiv)
                }
                task_input.value = ""
            }
            else {
                document.getElementById("message").style.backgroundColor = "lightcoral"
                document.getElementById("message").innerText = "No Tasks Available"
                task_input.value = ""
                setTimeout(() => {
                    document.getElementById("message").innerText = ""
                    document.getElementById("message").style.backgroundColor = "lightgrey"
                }, 2000)
            }
        }
    </script>
</body>

</html>